function EventEmitter(){this.events={}}function Model(){EventEmitter.call(this),this._milliseconds=this.setMillisecond(),this._seconds=this.setSecond(),this._minutes=this.setMinute(),this._hours=this.setHour()}function Arc(t,e,i,n){this.outerRadius=t,this.arcWidth=e,this.innerRadius=this.outerRadius-this.arcWidth,this.arcStartInDegree=1,this._color=i,this.cornerSize=3,this.ctx=n}function View(t){EventEmitter.call(this),this._model=t,this.ctx=$("#canvas")[0].getContext("2d"),this._elements=["hour","minute","second","millisecond"],this._getElements(),this._init(),this._bindActions()}function Controller(t,e){this._view=t,this._model=e,this._bindActions()}EventEmitter.prototype.on=function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},EventEmitter.prototype.off=function(t,e){if(this.events[t]){var i=this.events[t].indexOf(e);i>-1&&this.events[t].splice(i,1)}},EventEmitter.prototype.emit=function(t,e){this.events[t]&&this.events[t].forEach(function(t){t(e)})},Model.prototype=Object.create(EventEmitter.prototype),Model.prototype.constructor=Model,Model.prototype.start=function(){this._tic(),window.requestAnimationFrame(this.start.bind(this))},Model.prototype._tic=function(){this.emit("tic"),this.setMillisecond(),this.setSecond(),this.setMinute(),this.setHour()},Model.prototype.getHour=function(){return this._hours},Model.prototype.getMinute=function(){return this._minutes},Model.prototype.getSecond=function(){return this._seconds},Model.prototype.getMillisecond=function(){return this._milliseconds},Model.prototype.getSecondInMls=function(){var t=this._seconds,e=this._milliseconds,i=1e3*t+e;return i},Model.prototype.getMinuteInMls=function(){var t=this.getSecondInMls(),e=this._minutes,i=60*e*1e3+t;return i},Model.prototype.getMinuteInS=function(){var t=this._seconds,e=this._minutes,i=60*e+t;return i},Model.prototype.getHourInS=function(){var t=this.getMinuteInS(),e=this._hours,i=60*e*60+t;return i},Model.prototype.getHourInS=function(){var t=this.getMinuteInS(),e=this._hours,i=60*e*60+t;return i},Model.prototype.getSecondInDegree=function(){var t=this.getSecondInMls(),e=.006*t;return e},Model.prototype.getMinuteInDegree=function(){var t=this.getMinuteInMls(),e=1e-4*t;return e},Model.prototype.getHourInDegree=function(){var t=this.getHourInS(),e=t*(360/86400);return e},Model.prototype.setHour=function(t){var e=new Date;this._hours=e.getHours(),this.emit("hChange")},Model.prototype.setMinute=function(){var t=new Date;this._minutes=t.getMinutes(),this.emit("mChange")},Model.prototype.setSecond=function(){var t=new Date;this._seconds=t.getSeconds(),this.emit("sChange")},Model.prototype.setMillisecond=function(){var t=new Date;this._milliseconds=t.getMilliseconds(),this.emit("msChange")},Arc.prototype.drawArc=function(t){this.arcEndInDegree=t,this.outerCornerX=(this.outerRadius-this.cornerSize)*Math.cos(this.arcEndInDegree*(Math.PI/180)),this.outerCornerY=(this.outerRadius-this.cornerSize)*Math.sin(this.arcEndInDegree*(Math.PI/180)),this.innerCornerX=(this.innerRadius+this.cornerSize)*Math.cos(this.arcEndInDegree*(Math.PI/180)),this.innerCornerY=(this.innerRadius+this.cornerSize)*Math.sin(this.arcEndInDegree*(Math.PI/180)),this.outerCornerArcStart=(0+this.arcEndInDegree)*(Math.PI/180),this.outerCornerArcEnd=(90+this.arcEndInDegree)*(Math.PI/180),this.innerCornerArcStart=(90+this.arcEndInDegree)*(Math.PI/180),this.innerCornerArcEnd=(180+this.arcEndInDegree)*(Math.PI/180),this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(this.innerRadius+this.cornerSize,0,this.cornerSize,180*(Math.PI/180),270*(Math.PI/180),!1),this.ctx.arc(this.outerRadius-this.cornerSize,0,this.cornerSize,270*(Math.PI/180),0*(Math.PI/180),!1),this.ctx.arc(0,0,this.outerRadius,this.arcStartInDegree*(Math.PI/180),this.arcEndInDegree*(Math.PI/180),!1),this.ctx.arc(this.outerCornerX,this.outerCornerY,this.cornerSize,this.outerCornerArcStart,this.outerCornerArcEnd,!1),this.ctx.arc(this.innerCornerX,this.innerCornerY,this.cornerSize,this.innerCornerArcStart,this.innerCornerArcEnd,!1),this.ctx.arc(0,0,this.innerRadius,this.arcEndInDegree*(Math.PI/180),this.arcStartInDegree*(Math.PI/180),!0),this.ctx.closePath(),this.ctx.fillStyle=this._color,this.ctx.fill(),this.ctx.restore()},View.prototype=Object.create(EventEmitter.prototype),View.prototype.constructor=View,View.prototype._init=function(){this._redraw()},View.prototype._getElements=function(){this._elements.forEach(function(t){this["_"+t]=document.getElementById(t)},this)},View.prototype._bindActions=function(){this._model.on("msChange",this._drawMillisecondInTxt.bind(this)),this._model.on("sChange",this._drawSecondInTxt.bind(this)),this._model.on("sChange",this._drawSecond.bind(this)),this._model.on("tic",this.canvasRefresh.bind(this)),this._model.on("sChange",this._drawSecondInArc.bind(this)),this._model.on("mChange",this._drawMinuteInArc.bind(this)),this._model.on("hChange",this._drawHourInArc.bind(this)),this._model.on("mChange",this._drawMinuteInTxt.bind(this)),this._model.on("hChange",this._drawHourInTxt.bind(this))},View.prototype.canvasRefresh=function(){this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,500,500),this.ctx.translate(250,250),this.ctx.rotate(-90*Math.PI/180)},View.prototype._redraw=function(){this._secondArc=new Arc(240,25,"orange",this.ctx),this._minuteArc=new Arc(210,25,"blue",this.ctx),this._hourArc=new Arc(180,25,"green",this.ctx),this.canvasRefresh(),this._drawHourInTxt(),this._drawMinuteInTxt(),this._drawSecondInTxt(),this._drawSecond(),this._drawMillisecondInTxt(),this._drawSecondInArc(),this._drawMinuteInArc(),this._drawHourInArc()},View.prototype._drawDiv=function(t,e,i){var n=$("<div>").css("height","14px").css("width",t+"%").css("background-color",e).css("margin","1px 0px").text(i).css("text-align","right").css("color","white").css("font-family","arial").css("padding-right","2px");return n},View.prototype._drawSecondInArc=function(){var t=this._model.getSecondInDegree();this._secondArc.drawArc(t)},View.prototype._drawMinuteInArc=function(){var t=this._model.getMinuteInDegree();this._minuteArc.drawArc(t)},View.prototype._drawHourInArc=function(){var t=this._model.getHourInDegree();this._hourArc.drawArc(t)},View.prototype._drawHourInTxt=function(){var t=this._model.getHour();this._hour.innerHTML=10>t?"0"+t:t},View.prototype._drawMinuteInTxt=function(){var t=this._model.getMinute();this._minute.innerHTML=10>t?"0"+t:t},View.prototype._drawSecondInTxt=function(){var t=this._model.getSecond();this._second.innerHTML=t},View.prototype._drawMillisecondInTxt=function(){var t=this._model.getMillisecond();this._millisecond.innerHTML=t},View.prototype._drawSecond=function(){var t=this._model.getSecondInMls();$("#drawS").empty();var e;e=t*(100/6e4);var i=this._drawDiv(e,"orange",Math.floor(t/1e3)+" secondes");$("#drawS").append(i)},Controller.prototype._bindActions=function(){};var model=new Model,view=new View(model),controller=new Controller(view,model);model.start();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2ZW50RW1pdHRlci5qcyIsIm1vZGVsLmpzIiwiYXJjLmpzIiwidmlldy5qcyIsImNvbnRyb2xsZXIuanMiLCJhcHAuanMiXSwibmFtZXMiOlsiRXZlbnRFbWl0dGVyIiwidGhpcyIsImV2ZW50cyIsIk1vZGVsIiwiY2FsbCIsIl9taWxsaXNlY29uZHMiLCJzZXRNaWxsaXNlY29uZCIsIl9zZWNvbmRzIiwic2V0U2Vjb25kIiwiX21pbnV0ZXMiLCJzZXRNaW51dGUiLCJfaG91cnMiLCJzZXRIb3VyIiwiQXJjIiwib3V0ZXJSYWRpdXMiLCJhcmNXaWR0aCIsImNvbG9yIiwiX2N0eCIsImlubmVyUmFkaXVzIiwiYXJjU3RhcnRJbkRlZ3JlZSIsIl9jb2xvciIsImNvcm5lclNpemUiLCJjdHgiLCJWaWV3IiwibW9kZWwiLCJfbW9kZWwiLCIkIiwiZ2V0Q29udGV4dCIsIl9lbGVtZW50cyIsIl9nZXRFbGVtZW50cyIsIl9pbml0IiwiX2JpbmRBY3Rpb25zIiwiQ29udHJvbGxlciIsInZpZXciLCJfdmlldyIsInByb3RvdHlwZSIsIm9uIiwiZXZlbnROYW1lIiwiZm4iLCJwdXNoIiwib2ZmIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiZW1pdCIsImRhdGEiLCJmb3JFYWNoIiwiT2JqZWN0IiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJzdGFydCIsIl90aWMiLCJ3aW5kb3ciLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJiaW5kIiwiZ2V0SG91ciIsImdldE1pbnV0ZSIsImdldFNlY29uZCIsImdldE1pbGxpc2Vjb25kIiwiZ2V0U2Vjb25kSW5NbHMiLCJhY3R1YWxTIiwiYWN0dWFsTWxzIiwic0luTWxzIiwiZ2V0TWludXRlSW5NbHMiLCJhY3R1YWxNIiwibUluTWxzIiwiZ2V0TWludXRlSW5TIiwibUluUyIsImdldEhvdXJJblMiLCJhY3R1YWxIIiwiaEluUyIsImdldFNlY29uZEluRGVncmVlIiwic2Vjb25kSW5EZWdyZWUiLCJnZXRNaW51dGVJbkRlZ3JlZSIsIm1pbnV0ZUluRGVncmVlIiwiZ2V0SG91ckluRGVncmVlIiwiaG91ckluRGVncmVlIiwiaG91ciIsIm5ld0RhdGUiLCJEYXRlIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyIsImdldE1pbGxpc2Vjb25kcyIsImRyYXdBcmMiLCJ0aW1lSW5EZWdyZWUiLCJhcmNFbmRJbkRlZ3JlZSIsIm91dGVyQ29ybmVyWCIsIk1hdGgiLCJjb3MiLCJQSSIsIm91dGVyQ29ybmVyWSIsInNpbiIsImlubmVyQ29ybmVyWCIsImlubmVyQ29ybmVyWSIsIm91dGVyQ29ybmVyQXJjU3RhcnQiLCJvdXRlckNvcm5lckFyY0VuZCIsImlubmVyQ29ybmVyQXJjU3RhcnQiLCJpbm5lckNvcm5lckFyY0VuZCIsInNhdmUiLCJiZWdpblBhdGgiLCJhcmMiLCJjbG9zZVBhdGgiLCJmaWxsU3R5bGUiLCJmaWxsIiwicmVzdG9yZSIsIl9yZWRyYXciLCJlbCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJfZHJhd01pbGxpc2Vjb25kSW5UeHQiLCJfZHJhd1NlY29uZEluVHh0IiwiX2RyYXdTZWNvbmQiLCJjYW52YXNSZWZyZXNoIiwiX2RyYXdTZWNvbmRJbkFyYyIsIl9kcmF3TWludXRlSW5BcmMiLCJfZHJhd0hvdXJJbkFyYyIsIl9kcmF3TWludXRlSW5UeHQiLCJfZHJhd0hvdXJJblR4dCIsInNldFRyYW5zZm9ybSIsImNsZWFyUmVjdCIsInRyYW5zbGF0ZSIsInJvdGF0ZSIsIl9zZWNvbmRBcmMiLCJfbWludXRlQXJjIiwiX2hvdXJBcmMiLCJfZHJhd0RpdiIsImRpdldpZHRoIiwidGltZSIsImRpdiIsImNzcyIsInRleHQiLCJfaG91ciIsImlubmVySFRNTCIsIm1pbnV0ZSIsIl9taW51dGUiLCJzZWNvbmQiLCJfc2Vjb25kIiwibWlsbGlzZWNvbmQiLCJfbWlsbGlzZWNvbmQiLCJlbXB0eSIsImZsb29yIiwiYXBwZW5kIiwiY29udHJvbGxlciJdLCJtYXBwaW5ncyI6IkFBQ0EsUUFBQUEs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QUFBLEdBQUEvRyxZQUFBQyxLQUFBVCxNQUVBQSxPQUFBMEIiLCJmaWxlIjoiZGlzdC9hcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZXZlbnRFbWl0dGVyLmpzXHJcbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpe1xyXG4gIHRoaXMuZXZlbnRzID0ge307IC8vIGFzc29jaWF0aXZlIGFycmF5IDogZXZlbnQgPT4gZnVuY3Rpb25zIHRvIGNhbGxcclxufVxyXG5cclxuLy8gQWRkIGEgZnVuY3Rpb24gdG8gdGhlIGV2ZW50XHJcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbihldmVudE5hbWUsIGZuKXtcclxuICB0aGlzLmV2ZW50c1tldmVudE5hbWVdID0gdGhpcy5ldmVudHNbZXZlbnROYW1lXSB8fCBbXTtcclxuICB0aGlzLmV2ZW50c1tldmVudE5hbWVdLnB1c2goZm4pO1xyXG59O1xyXG5cclxuLy8gUmVtb3ZlIGEgZnVuY3Rpb24gdG8gdGhlIGV2ZW50XHJcbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24oZXZlbnROYW1lLCBmbil7XHJcbiAgaWYodGhpcy5ldmVudHNbZXZlbnROYW1lXSl7XHJcbiAgICAgIHZhciBpbmRleCA9IHRoaXMuZXZlbnRzW2V2ZW50TmFtZV0uaW5kZXhPZihmbik7XHJcbiAgICAgIGlmIChpbmRleCA+IC0xKSB0aGlzLmV2ZW50c1tldmVudE5hbWVdLnNwbGljZShpbmRleCwgMSk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8gVHJpZ2dlciB0aGUgZXZlbnQgKGNhbGwgYWxsIHRoZSBmdW5jdGlvbnMgbGlua2VkKVxyXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbihldmVudE5hbWUsIGRhdGEpe1xyXG4gIGlmKHRoaXMuZXZlbnRzW2V2ZW50TmFtZV0pe1xyXG4gICAgdGhpcy5ldmVudHNbZXZlbnROYW1lXS5mb3JFYWNoKGZ1bmN0aW9uKGZuKXtcclxuICAgICAgZm4oZGF0YSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcbiIsImZ1bmN0aW9uIE1vZGVsKCkge1xyXG4gICAgRXZlbnRFbWl0dGVyLmNhbGwodGhpcyk7IC8vIENhbGwgRXZlbnRFbWl0dGVyIGNvbnN0cnVjdG9yXHJcbiAgICAvLyBNb2RlbCBJbml0aWFsaXNhdGlvblxyXG4gICAgdGhpcy5fbWlsbGlzZWNvbmRzID0gdGhpcy5zZXRNaWxsaXNlY29uZCgpO1xyXG4gICAgdGhpcy5fc2Vjb25kcyA9IHRoaXMuc2V0U2Vjb25kKCk7XHJcbiAgICB0aGlzLl9taW51dGVzID0gdGhpcy5zZXRNaW51dGUoKTtcclxuICAgIHRoaXMuX2hvdXJzID0gdGhpcy5zZXRIb3VyKCk7XHJcbn1cclxuXHJcbi8vIEV2ZW50RW1pdHRlciBpbmhlcml0YW5jZVxyXG5Nb2RlbC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO1xyXG5Nb2RlbC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBNb2RlbDtcclxuXHJcbi8vIFN0YXJ0IHRoZSBjbG9ja1xyXG5Nb2RlbC5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuX3RpYygpO1xyXG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnN0YXJ0LmJpbmQodGhpcykpO1xyXG59O1xyXG5cclxuLy8gVGljLi4uXHJcbk1vZGVsLnByb3RvdHlwZS5fdGljID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmVtaXQoJ3RpYycpO1xyXG4gICAgdGhpcy5zZXRNaWxsaXNlY29uZCgpO1xyXG4gICAgdGhpcy5zZXRTZWNvbmQoKTtcclxuICAgIHRoaXMuc2V0TWludXRlKCk7XHJcbiAgICB0aGlzLnNldEhvdXIoKTtcclxufTtcclxuXHJcblxyXG4vLy8vIEdFVCBUSU1FIElOIElUUyBPV04gVkFMTFVFIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuTW9kZWwucHJvdG90eXBlLmdldEhvdXIgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9ob3VycztcclxufTtcclxuXHJcbk1vZGVsLnByb3RvdHlwZS5nZXRNaW51dGUgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9taW51dGVzO1xyXG59O1xyXG5cclxuTW9kZWwucHJvdG90eXBlLmdldFNlY29uZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NlY29uZHM7XHJcbn07XHJcblxyXG5Nb2RlbC5wcm90b3R5cGUuZ2V0TWlsbGlzZWNvbmQgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLl9taWxsaXNlY29uZHM7XHJcbn07XHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5cclxuLy8vLyBHRVQgVElNRSBJTiBPU0VSIFZBTExVRVMgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5Nb2RlbC5wcm90b3R5cGUuZ2V0U2Vjb25kSW5NbHMgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBhY3R1YWxTID0gdGhpcy5fc2Vjb25kcztcclxuICAgIHZhciBhY3R1YWxNbHMgPSB0aGlzLl9taWxsaXNlY29uZHM7XHJcbiAgICB2YXIgc0luTWxzID0gIChhY3R1YWxTICogMTAwMCkgKyBhY3R1YWxNbHM7XHJcbiAgICByZXR1cm4gc0luTWxzO1xyXG59O1xyXG5cclxuTW9kZWwucHJvdG90eXBlLmdldE1pbnV0ZUluTWxzID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgc0luTWxzID0gdGhpcy5nZXRTZWNvbmRJbk1scygpO1xyXG4gICAgdmFyIGFjdHVhbE0gPSB0aGlzLl9taW51dGVzO1xyXG4gICAgdmFyIG1Jbk1scyA9ICAoYWN0dWFsTSAqIDYwICogMTAwMCkgKyBzSW5NbHM7XHJcbiAgICByZXR1cm4gbUluTWxzO1xyXG59O1xyXG5cclxuTW9kZWwucHJvdG90eXBlLmdldE1pbnV0ZUluUyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGFjdHVhbFMgPSB0aGlzLl9zZWNvbmRzO1xyXG4gICAgdmFyIGFjdHVhbE0gPSB0aGlzLl9taW51dGVzO1xyXG4gICAgdmFyIG1JblMgPSAoYWN0dWFsTSAqIDYwKSArIGFjdHVhbFM7XHJcbiAgICByZXR1cm4gbUluUztcclxufTtcclxuXHJcbk1vZGVsLnByb3RvdHlwZS5nZXRIb3VySW5TID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbUluUyA9IHRoaXMuZ2V0TWludXRlSW5TKCk7XHJcbiAgICB2YXIgYWN0dWFsSCA9IHRoaXMuX2hvdXJzO1xyXG4gICAgdmFyIGhJblMgPSAoYWN0dWFsSCAgKiA2MCAqIDYwKSArIG1JblM7XHJcbiAgICByZXR1cm4gaEluUztcclxufTtcclxuXHJcbk1vZGVsLnByb3RvdHlwZS5nZXRIb3VySW5TID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbUluUyA9IHRoaXMuZ2V0TWludXRlSW5TKCk7XHJcbiAgICB2YXIgYWN0dWFsSCA9IHRoaXMuX2hvdXJzO1xyXG4gICAgdmFyIGhJblMgPSAoYWN0dWFsSCAgKiA2MCAqIDYwKSArIG1JblM7XHJcbiAgICByZXR1cm4gaEluUztcclxufTtcclxuXHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuXHJcbi8vLy8gR0VUIFRJTUUgSU4gREVHUkVFIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuTW9kZWwucHJvdG90eXBlLmdldFNlY29uZEluRGVncmVlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGFjdHVhbFMgPSB0aGlzLmdldFNlY29uZEluTWxzKCk7XHJcbiAgICB2YXIgc2Vjb25kSW5EZWdyZWUgPSBhY3R1YWxTICogKDM2MCAvIDYwMDAwKTtcclxuICAgIHJldHVybiBzZWNvbmRJbkRlZ3JlZTtcclxufTtcclxuXHJcbk1vZGVsLnByb3RvdHlwZS5nZXRNaW51dGVJbkRlZ3JlZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBhY3R1YWxNID0gdGhpcy5nZXRNaW51dGVJbk1scygpO1xyXG4gICAgdmFyIG1pbnV0ZUluRGVncmVlID0gYWN0dWFsTSAqICgzNjAgLyAzNjAwMDAwKTtcclxuICAgIHJldHVybiBtaW51dGVJbkRlZ3JlZTtcclxufTtcclxuXHJcbk1vZGVsLnByb3RvdHlwZS5nZXRIb3VySW5EZWdyZWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYWN0dWFsSCA9IHRoaXMuZ2V0SG91ckluUygpO1xyXG4gICAgdmFyIGhvdXJJbkRlZ3JlZSA9IGFjdHVhbEggKiAoMzYwIC8gODY0MDApO1xyXG4gICAgcmV0dXJuIGhvdXJJbkRlZ3JlZTtcclxufTtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5cclxuXHJcblxyXG4vLy8vIFNFVFRJTkcgVElNRSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbk1vZGVsLnByb3RvdHlwZS5zZXRIb3VyID0gZnVuY3Rpb24oaG91cikge1xyXG4gICAgdmFyIG5ld0RhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgdGhpcy5faG91cnMgPSBuZXdEYXRlLmdldEhvdXJzKCk7XHJcbiAgICB0aGlzLmVtaXQoJ2hDaGFuZ2UnKTtcclxufTtcclxuXHJcbk1vZGVsLnByb3RvdHlwZS5zZXRNaW51dGUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBuZXdEYXRlID0gbmV3IERhdGUoKTtcclxuICAgIHRoaXMuX21pbnV0ZXMgPSBuZXdEYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgIHRoaXMuZW1pdCgnbUNoYW5nZScpO1xyXG59O1xyXG5cclxuTW9kZWwucHJvdG90eXBlLnNldFNlY29uZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIG5ld0RhdGUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgdGhpcy5fc2Vjb25kcyA9IG5ld0RhdGUuZ2V0U2Vjb25kcygpO1xyXG4gICAgdGhpcy5lbWl0KCdzQ2hhbmdlJyk7XHJcbn07XHJcblxyXG5Nb2RlbC5wcm90b3R5cGUuc2V0TWlsbGlzZWNvbmQgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBuZXdEYXRlID0gbmV3IERhdGUoKTtcclxuICAgIHRoaXMuX21pbGxpc2Vjb25kcyA9IG5ld0RhdGUuZ2V0TWlsbGlzZWNvbmRzKCk7XHJcbiAgICB0aGlzLmVtaXQoJ21zQ2hhbmdlJyk7XHJcbn07XHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiIsIi8vIGFyYy5qc1xuZnVuY3Rpb24gQXJjKG91dGVyUmFkaXVzLGFyY1dpZHRoLGNvbG9yLF9jdHgpe1xuICAgIC8vIEFyYyBwcm9wZXJ0aWVzXG4gICAgdGhpcy5vdXRlclJhZGl1cyA9IG91dGVyUmFkaXVzO1xuICAgIHRoaXMuYXJjV2lkdGggPSBhcmNXaWR0aDtcbiAgICB0aGlzLmlubmVyUmFkaXVzID0gdGhpcy5vdXRlclJhZGl1cyAtIHRoaXMuYXJjV2lkdGg7XG4gICAgdGhpcy5hcmNTdGFydEluRGVncmVlID0gMTtcbiAgICB0aGlzLl9jb2xvciA9IGNvbG9yO1xuICAgIC8vIFJvdW5kZWQgY29ybmVycyBwcm9wZXJ0aWVzXG4gICAgdGhpcy5jb3JuZXJTaXplID0gMztcbiAgICB0aGlzLmN0eCA9IF9jdHg7XG59XG5cbkFyYy5wcm90b3R5cGUuZHJhd0FyYyA9IGZ1bmN0aW9uICh0aW1lSW5EZWdyZWUpe1xuICAgIC8vdGhpcy5jdHggPSBjdHg7XG4gICAgdGhpcy5hcmNFbmRJbkRlZ3JlZSA9IHRpbWVJbkRlZ3JlZTtcbiAgICB0aGlzLm91dGVyQ29ybmVyWCA9ICh0aGlzLm91dGVyUmFkaXVzIC0gdGhpcy5jb3JuZXJTaXplKSAqIChNYXRoLmNvcygodGhpcy5hcmNFbmRJbkRlZ3JlZSkgKiAoTWF0aC5QSSAvIDE4MCkpKTtcbiAgICB0aGlzLm91dGVyQ29ybmVyWSA9ICh0aGlzLm91dGVyUmFkaXVzIC0gdGhpcy5jb3JuZXJTaXplKSAqIChNYXRoLnNpbigodGhpcy5hcmNFbmRJbkRlZ3JlZSkgKiAoTWF0aC5QSSAvIDE4MCkpKTtcbiAgICB0aGlzLmlubmVyQ29ybmVyWCA9ICh0aGlzLmlubmVyUmFkaXVzICsgdGhpcy5jb3JuZXJTaXplKSAqIChNYXRoLmNvcygodGhpcy5hcmNFbmRJbkRlZ3JlZSkgKiAoTWF0aC5QSSAvIDE4MCkpKTtcbiAgICB0aGlzLmlubmVyQ29ybmVyWSA9ICh0aGlzLmlubmVyUmFkaXVzICsgdGhpcy5jb3JuZXJTaXplKSAqIChNYXRoLnNpbigodGhpcy5hcmNFbmRJbkRlZ3JlZSkgKiAoTWF0aC5QSSAvIDE4MCkpKTtcbiAgICB0aGlzLm91dGVyQ29ybmVyQXJjU3RhcnQgPSAoMCArIHRoaXMuYXJjRW5kSW5EZWdyZWUpICogKE1hdGguUEkgLyAxODApO1xuICAgIHRoaXMub3V0ZXJDb3JuZXJBcmNFbmQgPSAoOTAgKyB0aGlzLmFyY0VuZEluRGVncmVlKSAqIChNYXRoLlBJIC8gMTgwKTtcbiAgICB0aGlzLmlubmVyQ29ybmVyQXJjU3RhcnQgPSAoOTAgKyB0aGlzLmFyY0VuZEluRGVncmVlKSAqIChNYXRoLlBJIC8gMTgwKTtcbiAgICB0aGlzLmlubmVyQ29ybmVyQXJjRW5kID0gKDE4MCArIHRoaXMuYXJjRW5kSW5EZWdyZWUpICogKE1hdGguUEkgLyAxODApO1xuXG4gICAgdGhpcy5jdHguc2F2ZSgpO1xuICAgIC8vIFN0YXJ0IGRyYXdpbmdcbiAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAvL1N0YXJ0IGlubmVyIHJvdW5kZWQgY29ybmVyXG4gICAgdGhpcy5jdHguYXJjKHRoaXMuaW5uZXJSYWRpdXMgKyB0aGlzLmNvcm5lclNpemUsIDAsIHRoaXMuY29ybmVyU2l6ZSwgMTgwICogKE1hdGguUEkgLyAxODApLCAyNzAgKiAoTWF0aC5QSSAvIDE4MCksIGZhbHNlKTtcbiAgICAvL1N0YXJ0IG91dGVyIHJvdW5kZWQgY29ybmVyXG4gICAgdGhpcy5jdHguYXJjKHRoaXMub3V0ZXJSYWRpdXMgLSB0aGlzLmNvcm5lclNpemUsIDAsIHRoaXMuY29ybmVyU2l6ZSwgMjcwICogKE1hdGguUEkgLyAxODApLCAwICogKE1hdGguUEkgLyAxODApLCBmYWxzZSk7XG4gICAgLy9PdXRlciBhcmNcbiAgICB0aGlzLmN0eC5hcmMoMCwgMCwgdGhpcy5vdXRlclJhZGl1cywgKHRoaXMuYXJjU3RhcnRJbkRlZ3JlZSAqIChNYXRoLlBJIC8gMTgwKSksICh0aGlzLmFyY0VuZEluRGVncmVlICogKE1hdGguUEkgLyAxODApKSwgZmFsc2UpO1xuICAgIC8vRXh0cmltaXR5IG91dGVyIHJvdW5kZWQgY29ybmVyXG4gICAgdGhpcy5jdHguYXJjKHRoaXMub3V0ZXJDb3JuZXJYLCB0aGlzLm91dGVyQ29ybmVyWSwgdGhpcy5jb3JuZXJTaXplLCB0aGlzLm91dGVyQ29ybmVyQXJjU3RhcnQsIHRoaXMub3V0ZXJDb3JuZXJBcmNFbmQsIGZhbHNlKTtcbiAgICAvL0V4dHJpbWl0eSBpbm5lciByb3VuZGVkIGNvcm5lclxuICAgIHRoaXMuY3R4LmFyYyh0aGlzLmlubmVyQ29ybmVyWCwgdGhpcy5pbm5lckNvcm5lclksIHRoaXMuY29ybmVyU2l6ZSwgdGhpcy5pbm5lckNvcm5lckFyY1N0YXJ0LCB0aGlzLmlubmVyQ29ybmVyQXJjRW5kLCBmYWxzZSk7XG4gICAgLy9Jbm5lciBhcmNcbiAgICB0aGlzLmN0eC5hcmMoMCwgMCwgdGhpcy5pbm5lclJhZGl1cywgKHRoaXMuYXJjRW5kSW5EZWdyZWUgKiAoTWF0aC5QSSAvIDE4MCkpLCAodGhpcy5hcmNTdGFydEluRGVncmVlICogKE1hdGguUEkgLyAxODApKSwgdHJ1ZSk7XG4gICAgdGhpcy5jdHguY2xvc2VQYXRoKCk7XG4gICAgdGhpcy5jdHguZmlsbFN0eWxlID0gdGhpcy5fY29sb3I7XG4gICAgdGhpcy5jdHguZmlsbCgpO1xuICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcblxufTtcbiIsImZ1bmN0aW9uIFZpZXcobW9kZWwpIHtcclxuICAgIEV2ZW50RW1pdHRlci5jYWxsKHRoaXMpO1xyXG4gICAgdGhpcy5fbW9kZWwgPSBtb2RlbDtcclxuICAgIHRoaXMuY3R4ID0gJCgnI2NhbnZhcycpWzBdLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAvLyBBbGwgdGhlIERPTSBlbGVtZW50cyB0byBnZXRcclxuICAgIHRoaXMuX2VsZW1lbnRzID0gWydob3VyJywgJ21pbnV0ZScsICdzZWNvbmQnLCAnbWlsbGlzZWNvbmQnXTtcclxuICAgIHRoaXMuX2dldEVsZW1lbnRzKCk7XHJcbiAgICB0aGlzLl9pbml0KCk7XHJcbiAgICB0aGlzLl9iaW5kQWN0aW9ucygpO1xyXG5cclxufVxyXG5cclxuVmlldy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEV2ZW50RW1pdHRlci5wcm90b3R5cGUpO1xyXG5WaWV3LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFZpZXc7XHJcblxyXG5WaWV3LnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5fcmVkcmF3KCk7XHJcbn07XHJcblxyXG4vLyBHZXQgYWxsIHRoZSBET00gZWxlbWVudHMgYW5kIGJpbmQgZW1pdFxyXG4vLyBCYXNpY2FsbHksIGl0IHRyYW5zZm9ybXMgRE9NIGV2ZW50IGludG8gVmlldyBldmVudFxyXG5WaWV3LnByb3RvdHlwZS5fZ2V0RWxlbWVudHMgPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuX2VsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24oZWwpIHsgLy8gWydob3VyJywgLi4uIF1cclxuICAgICAgICB0aGlzWydfJyArIGVsXSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsKTsgLy8gZXg6IHRoaXMuX2hvdXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG91cicpO1xyXG4gICAgfSwgdGhpcyk7XHJcbn07XHJcblxyXG4vLyBXaGF0IG11c3QgSSBkbyB3aGVuIG1vZGVsIGNoYW5nZXM/XHJcblZpZXcucHJvdG90eXBlLl9iaW5kQWN0aW9ucyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHRoaXMuX21vZGVsLm9uKCdtc0NoYW5nZScsIHRoaXMuX2RyYXdNaWxsaXNlY29uZEluVHh0LmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fbW9kZWwub24oJ3NDaGFuZ2UnLCB0aGlzLl9kcmF3U2Vjb25kSW5UeHQuYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLl9tb2RlbC5vbignc0NoYW5nZScsIHRoaXMuX2RyYXdTZWNvbmQuYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLl9tb2RlbC5vbigndGljJywgdGhpcy5jYW52YXNSZWZyZXNoLmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fbW9kZWwub24oJ3NDaGFuZ2UnLCB0aGlzLl9kcmF3U2Vjb25kSW5BcmMuYmluZCh0aGlzKSk7XHJcbiAgICB0aGlzLl9tb2RlbC5vbignbUNoYW5nZScsIHRoaXMuX2RyYXdNaW51dGVJbkFyYy5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuX21vZGVsLm9uKCdoQ2hhbmdlJywgdGhpcy5fZHJhd0hvdXJJbkFyYy5iaW5kKHRoaXMpKTtcclxuICAgIHRoaXMuX21vZGVsLm9uKCdtQ2hhbmdlJywgdGhpcy5fZHJhd01pbnV0ZUluVHh0LmJpbmQodGhpcykpO1xyXG4gICAgdGhpcy5fbW9kZWwub24oJ2hDaGFuZ2UnLCB0aGlzLl9kcmF3SG91ckluVHh0LmJpbmQodGhpcykpO1xyXG59O1xyXG5cclxuXHJcblZpZXcucHJvdG90eXBlLmNhbnZhc1JlZnJlc2ggPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuY3R4LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTtcclxuICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCA1MDAsIDUwMCk7XHJcbiAgICB0aGlzLmN0eC50cmFuc2xhdGUoMjUwLCAyNTApO1xyXG4gICAgdGhpcy5jdHgucm90YXRlKC05MCAqIE1hdGguUEkgLyAxODApO1xyXG59O1xyXG5cclxuXHJcbi8vIFJlZHJhdyB0aGUgY2xvY2tcclxuVmlldy5wcm90b3R5cGUuX3JlZHJhdyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5fc2Vjb25kQXJjID0gbmV3IEFyYygyNDAsIDI1LCAnb3JhbmdlJywgdGhpcy5jdHgpO1xyXG4gICAgdGhpcy5fbWludXRlQXJjID0gbmV3IEFyYygyMTAsIDI1LCAnYmx1ZScsIHRoaXMuY3R4KTtcclxuICAgIHRoaXMuX2hvdXJBcmMgPSBuZXcgQXJjKDE4MCwyNSwnZ3JlZW4nLCB0aGlzLmN0eCk7XHJcbiAgICB0aGlzLmNhbnZhc1JlZnJlc2goKTtcclxuICAgIHRoaXMuX2RyYXdIb3VySW5UeHQoKTtcclxuICAgIHRoaXMuX2RyYXdNaW51dGVJblR4dCgpO1xyXG4gICAgdGhpcy5fZHJhd1NlY29uZEluVHh0KCk7XHJcbiAgICB0aGlzLl9kcmF3U2Vjb25kKCk7XHJcbiAgICB0aGlzLl9kcmF3TWlsbGlzZWNvbmRJblR4dCgpO1xyXG4gICAgdGhpcy5fZHJhd1NlY29uZEluQXJjKCk7XHJcbiAgICB0aGlzLl9kcmF3TWludXRlSW5BcmMoKTtcclxuICAgIHRoaXMuX2RyYXdIb3VySW5BcmMoKTtcclxufTtcclxuLy8gaG93IHRvIGRyYXcgdGltZSBpbiB0aGUgaHRtbFxyXG5WaWV3LnByb3RvdHlwZS5fZHJhd0RpdiA9IGZ1bmN0aW9uKGRpdldpZHRoLCBjb2xvciwgdGltZSkge1xyXG4gICAgdmFyIGRpdiA9ICQoJzxkaXY+JykuY3NzKCdoZWlnaHQnLCAnMTRweCcpLmNzcygnd2lkdGgnLCBkaXZXaWR0aCArICclJykuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJywgY29sb3IpLmNzcygnbWFyZ2luJywgJzFweCAwcHgnKVxyXG4gICAgICAgIC50ZXh0KHRpbWUpLmNzcygndGV4dC1hbGlnbicsICdyaWdodCcpLmNzcygnY29sb3InLCAnd2hpdGUnKS5jc3MoJ2ZvbnQtZmFtaWx5JywgJ2FyaWFsJykuY3NzKCdwYWRkaW5nLXJpZ2h0JywgJzJweCcpO1xyXG4gICAgcmV0dXJuIGRpdjtcclxufTtcclxuXHJcbi8vIGhvdyB0byBkcmF3IHRpbWUgaW4gY2FudmFzXHJcblZpZXcucHJvdG90eXBlLl9kcmF3U2Vjb25kSW5BcmMgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzZWNvbmRJbkRlZ3JlZSA9IHRoaXMuX21vZGVsLmdldFNlY29uZEluRGVncmVlKCk7XHJcbiAgICB0aGlzLl9zZWNvbmRBcmMuZHJhd0FyYyhzZWNvbmRJbkRlZ3JlZSk7XHJcbn07XHJcblxyXG5WaWV3LnByb3RvdHlwZS5fZHJhd01pbnV0ZUluQXJjID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbWludXRlSW5EZWdyZWUgPSB0aGlzLl9tb2RlbC5nZXRNaW51dGVJbkRlZ3JlZSgpO1xyXG4gICAgdGhpcy5fbWludXRlQXJjLmRyYXdBcmMobWludXRlSW5EZWdyZWUpO1xyXG59O1xyXG5cclxuVmlldy5wcm90b3R5cGUuX2RyYXdIb3VySW5BcmMgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBob3VySW5EZWdyZWUgPSB0aGlzLl9tb2RlbC5nZXRIb3VySW5EZWdyZWUoKTtcclxuICAgIHRoaXMuX2hvdXJBcmMuZHJhd0FyYyhob3VySW5EZWdyZWUpO1xyXG59O1xyXG5cclxuXHJcbi8vIFNldCBob3VyIHRvIG1vZGVsIHZhbHVlXHJcblZpZXcucHJvdG90eXBlLl9kcmF3SG91ckluVHh0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaG91ciA9IHRoaXMuX21vZGVsLmdldEhvdXIoKTtcclxuICAgIHRoaXMuX2hvdXIuaW5uZXJIVE1MID0gaG91ciA8IDEwID8gJzAnICsgaG91ciA6IGhvdXI7XHJcbn07XHJcblxyXG4vLyBTZXQgbWludXRlIHRvIG1vZGVsIHZhbHVlXHJcblZpZXcucHJvdG90eXBlLl9kcmF3TWludXRlSW5UeHQgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBtaW51dGUgPSB0aGlzLl9tb2RlbC5nZXRNaW51dGUoKTtcclxuICAgIHRoaXMuX21pbnV0ZS5pbm5lckhUTUwgPSBtaW51dGUgPCAxMCA/ICcwJyArIG1pbnV0ZSA6IG1pbnV0ZTtcclxufTtcclxuXHJcblxyXG4vLyBTZXQgbWlsbGlzc2Vjb25kIHRvIG1vZGVsIHZhbHVlXHJcblZpZXcucHJvdG90eXBlLl9kcmF3U2Vjb25kSW5UeHQgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBzZWNvbmQgPSB0aGlzLl9tb2RlbC5nZXRTZWNvbmQoKTtcclxuICAgIHRoaXMuX3NlY29uZC5pbm5lckhUTUwgPSBzZWNvbmQ7XHJcbn07XHJcblxyXG5cclxuLy8gU2V0IG1pbGxpc3NlY29uZCB0byBtb2RlbCB2YWx1ZVxyXG5WaWV3LnByb3RvdHlwZS5fZHJhd01pbGxpc2Vjb25kSW5UeHQgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBtaWxsaXNlY29uZCA9IHRoaXMuX21vZGVsLmdldE1pbGxpc2Vjb25kKCk7XHJcbiAgICB0aGlzLl9taWxsaXNlY29uZC5pbm5lckhUTUwgPSBtaWxsaXNlY29uZDtcclxufTtcclxuXHJcbi8vIGRyYXcgU2Vjb25kIGFzIGEgZGl2XHJcblZpZXcucHJvdG90eXBlLl9kcmF3U2Vjb25kID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgc2Vjb25kID0gdGhpcy5fbW9kZWwuZ2V0U2Vjb25kSW5NbHMoKTtcclxuICAgICQoJyNkcmF3UycpLmVtcHR5KCk7XHJcbiAgICB2YXIgZGl2V2lkdGg7XHJcbiAgICBkaXZXaWR0aCA9IHNlY29uZCAqICgxMDAgLyA2MDAwMCk7XHJcbiAgICB2YXIgZGl2ID0gdGhpcy5fZHJhd0RpdihkaXZXaWR0aCwgJ29yYW5nZScsIChNYXRoLmZsb29yKHNlY29uZCAvIDEwMDApKSArICcgc2Vjb25kZXMnKTtcclxuICAgICQoJyNkcmF3UycpLmFwcGVuZChkaXYpO1xyXG59O1xyXG4iLCJmdW5jdGlvbiBDb250cm9sbGVyKHZpZXcsIG1vZGVsKSB7XHJcbiAgICB0aGlzLl92aWV3ID0gdmlldztcclxuICAgIHRoaXMuX21vZGVsID0gbW9kZWw7XHJcbiAgICB0aGlzLl9iaW5kQWN0aW9ucygpO1xyXG59XHJcblxyXG4vLyBXaGF0IHRvIGRvIHdoZW4gdGhlIHZpZXcgdHJpZ2dlcnMgYW4gZXZlbnQ/XHJcbkNvbnRyb2xsZXIucHJvdG90eXBlLl9iaW5kQWN0aW9ucyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgLy8gdGhpcy5fdmlldy5vbignaFBsdXMnLCB0aGlzLl9hZGRIb3VyLmJpbmQodGhpcykpO1xyXG4gICAgLy8gdGhpcy5fdmlldy5vbignbVBsdXMnLCB0aGlzLl9hZGRNaW51dGUuYmluZCh0aGlzKSk7XHJcbiAgICAvLyB0aGlzLl92aWV3Lm9uKCdzUGx1cycsIHRoaXMuX2FkZFNlY29uZC5iaW5kKHRoaXMpKTtcclxufTtcclxuXHJcblxyXG4vLyBDb250cm9sbGVyLnByb3RvdHlwZS5fYWRkSG91ciA9IGZ1bmN0aW9uKCl7XHJcbi8vICAgdGhpcy5fbW9kZWwuYWRkSG91cigpO1xyXG4vLyB9O1xyXG4vLyBDb250cm9sbGVyLnByb3RvdHlwZS5fYWRkTWludXRlID0gZnVuY3Rpb24oKXtcclxuLy8gICB0aGlzLl9tb2RlbC5hZGRNaW51dGUoKTtcclxuLy8gfTtcclxuLy8gQ29udHJvbGxlci5wcm90b3R5cGUuX2FkZFNlY29uZCA9IGZ1bmN0aW9uKCl7XHJcbi8vICAgdGhpcy5fbW9kZWwuYWRkU2Vjb25kKCk7XHJcbi8vIH07XHJcbiIsInZhciBtb2RlbCA9IG5ldyBNb2RlbCgpO1xyXG52YXIgdmlldyA9IG5ldyBWaWV3KG1vZGVsKTtcclxudmFyIGNvbnRyb2xsZXIgPSBuZXcgQ29udHJvbGxlcih2aWV3LCBtb2RlbCk7XHJcblxyXG5tb2RlbC5zdGFydCgpO1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
